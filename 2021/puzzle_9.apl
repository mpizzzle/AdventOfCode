#! /usr/bin/apl --script

⎕IO←0 
input← ⎕FIO[49] 'files/9.txt'

j←⍉9,(⍉9,(⊃{⍎¨(2|⍳2×⍴⍵)⊂2/⍵}¨input),9),9
l←{3 3 ↑ (↑⌽⍵)⌽ (↑⍵)⊖ j} ¨ ⍳2-⍨⍴j
+/{(r + 1) × 4 = +/ (r←↑ 1⊖ 1⌽ c) < (2|⍳9) / 9 ⍴ c←⊃ ⍵ ⌷ l} ¨ (×/2-⍴j) ⍴ ⍳2-⍨⍴j

)OFF
