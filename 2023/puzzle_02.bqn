#! /usr/bin/env bqn

⟨ToNat, Split⟩ ← •Import "idioms.bqn"

input ← •FLines "files/2.txt"

S ← Split
P ← { { ∘‿2 ⥊ 1 ↓ ' ' S 𝕩 ⊏˜ / (⊢∨»)⍟3 « 𝕩 ∊ ⊑"0"+⟜↕¨10 }¨ ';' S ⊑ 1 ↓ ':' S 𝕩 }
Q ← ⊢⊔˜·⊐⊑˘
R ← (∘‿2 ⥊ "r"‿0‿"g"‿0‿"b"‿0) ∾ (⌽ToNat⌾⊑)˘
_c ← { (𝕗´⊑∘⌽˘)¨ }

•Show +´ 1 + / { ∧´ · { ∧´ 0 ≤ 12‿13‿14 - +_c Q R 𝕩 }¨ P 𝕩 }¨ input # part 1
•Show +´ { ×´ ⌈_c Q R ∾ P 𝕩 }¨ input # part 2
