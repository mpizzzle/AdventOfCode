#! /usr/bin/env bqn

⟨ToNat, Split⟩ ← •Import "idioms.bqn"

input ← •FLines "files/2.txt"

S ← Split
P ← { { ∘‿2 ⥊ 1 ↓ ' ' S 𝕩 ⊏˜ / (⊢∨»)⍟3 « 𝕩 ∊ ⊑"0"+⟜↕¨10 }¨ ';' S ⊑ 1 ↓ ':' S 𝕩 }
_f ← { (𝕗´⊑∘⌽˘)¨ ·(⊢⊔˜·⊐⊑˘) (∘‿2 ⥊ "r"‿0‿"g"‿0‿"b"‿0) ∾ (⌽ToNat⌾⊑)˘ }

•Show +´ 1 + / (∧´ · (∧´ 0 ≤ 12‿13‿14 - +_f)¨ P)¨ input # part 1
•Show +´ (×´·⌈_f·∾P)¨ input # part 2
