#!/usr/bin/env BQN

input â† â€¢FLines "files/19.txt"

Format â† 1â€¿0â€¿1 / ' '((âŠ¢-Ëœ+`Ã—Â¬)âˆ˜=âŠ”âŠ¢)âŠ¢

replacements â† Format Â¨ Â¯2â†“input
molecule â† Â¯1 âŠ‘ input

ExpandShape â† { (â‰ ğ•©) /â‹ˆ ğ•¨ }
ExpandIndices â† { (â‰ ğ•©) /â‹ˆâ†• (â‰ ğ•¨) }
GetIndices â† { ğ•© + ğ•¨ ExpandIndices ğ•© }
Indices â† { ğ•¨ GetIndices ğ•¨ /âˆ˜â· ğ•© }
StripEmpty â† âŠ¢/Ëœ0<â‰ Â¨
Partition â† (âŠ¢-Ëœ+`Ã—Â¬)âŠ¸âŠ”
GetMasks â† { (ğ•¨ ExpandIndices ğ•©) âˆŠÂ¨ ğ•© }
RotateColumns â† âˆ¾ âŒ½ âŒ¾ (2âŠ¸â†‘)
GetPartitions â† GetMasks PartitionÂ¨ ExpandShape
GetReplacements â† âŠ£ ExpandShape Ëœ â‹ˆ
DoThing â† âŠ£ IndicesËœ 0 âŠ‘ âŠ¢

GetMolecules â† {
  RotateColumns Â¨ ((ğ•¨ DoThing ğ•©) GetReplacements (1 âŠ‘ ğ•©)) âˆ¾Â¨ StripEmpty ğ•¨ GetPartitions (ğ•¨ DoThing ğ•©)
}

â‰ â·âˆ¾ moleculeâŠ¸GetMoleculesÂ¨ replacements # part 1
