#!/usr/bin/env BQN

input â† âŠ‘ â€¢FLines "files/12.txt"

Count â† +Â´ â€¢BQNÂ¨âˆ˜((('-'âˆ¾'0'+â†•10)âˆŠËœâŠ¢)âŠ¸((Â¬-ËœâŠ¢Ã—Â·+`Â»âŠ¸>)âŠ¸âŠ”))
ObjStack â† (âŠ£ (/ "[{" â·Ëœ âŠ£)âŠ¸âˆ¾ (âˆ¨Â´ "]}" â·Ëœ âŠ£)âŠ¸â†“)Ëœ
IdxStack â† (âŠ£ (âŠ¢âˆ¾Ëœ âŠ£ â†“Ëœ 1 + Â¬âˆ˜(âˆ¨Â´ "[{" â·Ëœ âŠ‘)âˆ˜âŠ£) (âˆ¨Â´ "]}" â·Ëœ âŠ‘)âŠ¸â†“)Ëœ
Idx â† (âŠ‘Â¨ 0 IdxStack` âŠ¢ âˆ¾Â¨ â†•âˆ˜â‰ )âˆ˜âŠ¢
Ignore â† 1 â†“ (/ "red"âŠ¸â·) (â· (âŠ£ âŠ (âŠ‘Â¨ 0 ObjStack` âŠ¢)) âˆ§ âŠ£ âŠ Idx) âŠ¢
Range â† Â¬ (âŠ£â‰¥âŒŠÂ´âˆ˜âŠ¢) âˆ§ âŠ£â‰¤âŒˆÂ´âˆ˜âŠ¢

i â† Idx input

â€¢Show Count input # part 1
â€¢Show Count ((âˆ§Â´ âŠ¢ { (â†•â‰ ğ•¨)âŠ¸(âŠ£ Range (/ iâŠ¸=))Â¨ ğ•© } Ignore)Ëœ / âŠ¢) input # part 2
