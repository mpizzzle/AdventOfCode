#!/usr/bin/env BQN

input â† (' '((âŠ¢-Ëœ+`Ã—Â¬)âˆ˜=âŠ”âŠ¢)'.'âŠ¸â‰ âŠ¸/)Â¨ â€¢FLines "files/13.txt"

Strip â† (0â€¿2â€¿3â€¿10 âˆŠËœ â†•11)âŠ¸/
Replace â† ("-+" âŠ‘Ëœ (âŒˆÂ´ "gain"âŠ¸âˆŠ)) âŒ¾ (1âŠ¸âŠ‘)
Truncate â† 1 âŒ½ Â¯1â€¿0âŠ¸âŠ âˆ¾ â€¢BQNâˆ˜(âˆ¾Â´1â€¿2âŠ¸âŠ)
Permutations â† (â‰â†•0){âˆ¾Ë(0âˆ¾Ë˜1+ğ•©)âŠ¸âŠâˆ˜â’Ë˜=âŒœËœâ†•ğ•¨}Â´-âŸœâ†•
Neighbours â† (â‰âˆ˜> Â¯1âŠ¸âŒ½ âˆ¾â—‹< 1âŠ¸âŒ½)âˆ˜âŠËœ
Arrangement â† 1âŠ¸âŠ‘Â¨ âŠ¢ /Ëœ âŠ£ âˆŠËœ âŠ‘âˆ˜âŒ½Â¨âˆ˜âŠ¢
Filter â† <â‰1 âŠ¢ âŠ ((âŠ¢âŠËœ(/0=8|â†•âˆ˜â‰ )) 8â†•âŠ£)
RemoveWorst â† +Â´âˆ˜(âŠ¢/ËœâŠ¢â‰ âŒŠÂ´) +Â´Ë˜âˆ˜â‰âˆ˜(1âŠ¸âŒ½ âŒ¾ âŠ)âˆ˜â‰
Identity â† â‰âŠ¢âˆ¾â†•âˆ˜â‰ âˆ¾â‰
Align â† âŒ½Â¨âŠ£âŠâˆ§âˆ˜(âŒ½Â¨)âˆ˜âŠ¢
Flip â† âŒ½Ë˜ âŒ¾ (0â€¿Â¯1âŠ¸âŠ)

people â† â· âŠ‘Â¨ input
potentials â† âˆ§ (Identity people) âˆ¾Ëœ >Truncateâˆ˜Replaceâˆ˜StripÂ¨ input
perms â† Permutations â‰  people

â€¢Show âŒˆÂ´ (peopleâŠ¸Neighbours (+Â´+Â´âˆ˜ArrangementË˜) potentialsâŠ¸Filter)Ë˜ perms # part 1
â€¢Show âŒˆÂ´ (RemoveWorstâˆ˜Flip peopleâŠ¸Neighbours ArrangementË˜ (â‰ /â‰) AlignË˜ potentialsâŠ¸Filter)Ë˜ perms # part 2
