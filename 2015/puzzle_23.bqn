#!/usr/bin/env BQN

input â† â€¢FLines "files/23.txt"

S â† "â‹„1" âˆ¾Ëœ (âˆ¾(1âŠ¸âŠ‘) âˆ¾ " â†© " âŒ¾ (0âŠ¸âŠ‘)âˆ¾âŠ£)
J â† âˆ¾ ')' âˆ¾Ëœ âŠ£ { ğ•¨ âŒ¾ (1âŠ¸âŠ‘) ğ•© } âŠ¢âŸœâŒ½ âŒ¾ (2âŠ¸â†‘)
evenâ€¿one â† "((1=2âŠ¸|)+âŠ£Ã—0=2âŠ¸|)Ëœ("â€¿"(1âŠ¸â‰ +âŠ£Ã—1âŠ¸=)Ëœ("

labels â† "hlf"â€¿"tpl"â€¿"inc"â€¿"jmp"â€¿"jie"â€¿"jio"
instructions â† ("Ã·2"âŠ¸S)â€¿("Ã—3"âŠ¸S)â€¿("+1"âŠ¸S)â€¿(1âŠ¸âŠ‘)â€¿(evenâŠ¸J)â€¿(oneâŠ¸J)

Partition â† ' '((âŠ¢-Ëœ+`Ã—Â¬)âˆ˜=âŠ”âŠ¢)','âŠ¸â‰ âŠ¸/
GetInstruction â† (/labelsâˆŠâŠ¢) â—¶ instructions

program â† GetInstructionâˆ˜Partition Â¨ input

Execute â† {
  repl â† â€¢ReBQN {repl â‡ "strict"}
  REPL Â¨ ğ•¨
  (REPLâˆ˜âŠ‘âŸœprogramâŠ¸+ âŸ ğ•©) 0
  â€¢Show REPL "b"
}

â€¢Show "bâ†0"â€¿"aâ†0" Execute 1484 # part 1
â€¢Show "bâ†0"â€¿"aâ†1" Execute 1936 # part 2
