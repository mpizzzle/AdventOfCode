#! /usr/bin/env BQN

âŸ¨ToInt, PartâŸ© â† â€¢Import "idioms.bqn"

input â† â€¢FLines "files/7.txt"
nols â† input âŠËœ/(Â¬âˆ˜(âŒˆÂ´"$ ls"âŠ¸â·)) Â¨ input
cd â† (âŒˆÂ´"$ cd"âŠ¸â·) Â¨ nols

GetSizes â† ToIntâŠ¢âŠËœ(/('0'+â†•10)âˆŠËœâŠ¢)

S â† 1-Ëœâ‰ 
Traverse â† { ((Â¯1Ã—Sğ•©) â†“ ğ•¨) âˆ¾ (Sğ•©) â†“ ğ•©  }`

keys â† Traverse nols PartËœ cd
totals â† (+Â´GetSizesÂ¨)Â¨ nols PartËœ Â¬cd
results â† {+Â´totals âŠËœ ğ•©}Â¨ { /(ğ•© âŠ‘ keys)âŠ¸(1Ã—+Â´âˆ˜â·)Â¨ keys }Â¨ â†•â‰ keys

â€¢Show +Â´ results âŠËœ /results â‰¤ 100000 # part 1
â€¢Show âŒŠÂ´ results âŠËœ /results â‰¥ 40000000 -Ëœ âŠ‘ results # part 2
