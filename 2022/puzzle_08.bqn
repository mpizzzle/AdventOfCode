#! /usr/bin/env BQN

input â† '0' -Ëœ â€¢FLines "files/8.txt"

xâ† 10â€¿10â†‘ > input
idx â† 5
lol â† > input

test â† > '0' -Ëœ âŸ¨"30373",
"25512",
"65332",
"33549",
"35390"âŸ©

I â† =âŒœâ—‹â†•Â´âˆ˜â‰¢

# slice the matrix into 4 cardinal slices
# for each point on each slice, do F
# map back to matrix, add all 4 back
# sum all

# function that generates all 4 array intersections for each point (is this slow?)

# function that takes an array and an index, returns true if number at index > than every number in one or more directions

B â† (1+âŠ£)âŠ¸â†‘
A â† âŒ½â†“
F â† 0 < A +â—‹((âŠ¢Ã—<)Â´) B

s â† â‰>{ (ğ•©âŠ¸FË˜ 1+x) }Â¨ â†•10
j â†  >{ (ğ•©âŠ¸FË˜â‰1+x) }Â¨ â†•10

one â† â‰>{ (ğ•©âŠ¸FË˜ 1+test) }Â¨ â†•5
two â†  >{ (ğ•©âŠ¸FË˜â‰1+test) }Â¨ â†•5

lolone â† â‰>{ (ğ•©âŠ¸FË˜ 1+lol) }Â¨ â†•99
loltwo â†  >{ (ğ•©âŠ¸FË˜â‰1+lol) }Â¨ â†•99

#x
+Â´+Ëlolone âˆ¨ loltwo

#x
id â† (I x)
id2 â† (I test)

#q â† { (Â¯1Ã—ğ•©)â†“+Ë(1+x) Ã— Â»âŸğ•© id } Â¨ â†•10

#{ { 5 F ğ•© } â€¢Show ğ•© âŠ‘ q }Â¨ â†•10
#5 F
#{ ğ•© FÂ¨+ËÂ¨q }Â¨â†•10
diagstest â† (âŒ½1 â†“ { (1+test) Ã— Â»âŸğ•© id2 } Â¨ â†•5) âˆ¾ { (1+test) Ã— Â«âŸğ•© id2 } Â¨ â†•5
diagstest2 â† (âŒ½1 â†“ { (1+test) Ã— Â»âŸğ•© âŒ½id2 } Â¨ â†•5) âˆ¾ { (1+test) Ã— Â«âŸğ•© âŒ½id2 } Â¨ â†•5

ff â† { ğ•©âŠ¸{ ğ•© F ğ•¨ âŠ‘ (+ËÂ¨diagstest) }Â¨ â†•5 }Â¨ â†•9
gg â† { ğ•©âŠ¸{ ğ•© F ğ•¨ âŠ‘ (+ËÂ¨diagstest2) }Â¨ â†•5 }Â¨ â†•9
three â† âˆ¨Â´0<â‰Â¨ff Ã— â‰Â¨diagstest
four â† âˆ¨Â´0<â‰Â¨gg Ã— â‰Â¨diagstest2

one âˆ¨ two


diags â† (âŒ½1 â†“ { (1+x) Ã— Â»âŸğ•© id } Â¨ â†•10) âˆ¾ { (1+x) Ã— Â«âŸğ•© id } Â¨ â†•10
diags2 â† (âŒ½1 â†“ { (1+x) Ã— Â»âŸğ•© âŒ½id } Â¨ â†•10) âˆ¾ { (1+x) Ã— Â«âŸğ•© âŒ½id } Â¨ â†•10

diags

dd â† { ğ•©âŠ¸{ ğ•© F ğ•¨ âŠ‘ (+ËÂ¨diags) }Â¨ â†•10 }Â¨ â†•19
ee â† { ğ•©âŠ¸{ ğ•© F ğ•¨ âŠ‘ (+ËÂ¨diags2) }Â¨ â†•10 }Â¨ â†•19
h â† âˆ¨Â´0<â‰Â¨dd Ã— â‰Â¨diags
o â† âˆ¨Â´0<â‰Â¨ee Ã— â‰Â¨diags2

s âˆ¨ j âˆ¨ h âˆ¨ o

diags Ã— dd

{ ğ•© {ğ•©âŠ¸FÂ¨ ğ•¨}Â¨ â†•â‰ ğ•© } ((âˆ¨`âˆ§âˆ¨`âŒ¾âŒ½)0âŠ¸â‰ )âŠ¸/Â¨(+ËÂ¨diags)

 { ğ•©âŠ¸FÂ¨ (+ËÂ¨diags) }Â¨ â†•10

>{ğ•©âŠ¸{ ğ•©âŠ¸F (+Ëğ•¨ âŠ‘ diags) }Â¨â†•10 } Â¨â†•10


{(+Ë x Ã— (0Ã—â†•ğ•©) Â» id)}Â¨â†•10
{ (ğ•©âŠ¸FË˜ 1 + ) }Â¨ â†•10

#a â† +Ëx Ã— I x
#b â† â†•10
#a
#idx { (1+ğ•¨) â†‘ âŒ½ğ•© } b
#idx { (âŒ½(1-Ëœğ•¨) â†“ ğ•©) } b
#
#idx { ((1+ğ•¨) â†‘ âŒ½ğ•©) +â—‹((âŠ¢Ã—<)Â´) (ğ•¨ â†‘ ğ•©) } b
#
#y â† xâŠ¸{ ğ•¨ Ã— ğ•¨ â‰¥ ğ•© }Â¨ â†•10
